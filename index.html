
<!DOCTYPE html>
<html>
<head>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.24.1/dist/phaser.js"></script>
</head>
<body>

    <script>
    var config = {
        type: Phaser.WEBGL,
        title: "Blade's Edge",
        width: 1900,
        height: 900,
        backgroundColor: '#2d2d2d',
        dissableContextMenu: true,
        pixelArt: true,
        physics: {
            default: 'arcade',
            arcade: {
                gravity: { y: 0 }
            }
        },
        scene: {
            preload: preload,
            create: create,
            update: update
        }
    };

    let player;
    
    function preload () {
       this.load.image('tiles', 'users/oscar/Coding/blades-edge/assets/tilemaps/tiles/pokemon_tileset_32.png');
       this.load.tilesetJSON('map', 'users/oscar/Tiled/test.json');
       this.load.spritesheet('player', 'assets/sprites/spaceman.png', {frameWidth: 16, frameHeight: 16});
       
    }

    function create () {
        const map = this.make.tilemap({key: 'map'});
        const tileset = map.addTilesetImage('pokemon_tileset_32.png');
        const belowLayer = map.createStaticLayer('below player', tileset, 0, 0);
        const worldLayer = map.createStaticLayer('world', tileset, 0, 0);
        const aboveLayer = map.createStaticLayer('above player', tileset, 0, 0);
        worldLayer.setCollisionByProperty({collides = true});
        const spawnPoint = map.findObject("Objects", obj => obj.name === "Spawn Point");
        player = this.physics.add.sprite(spawnPoint.x, spawnPoint.y, 'spaceman', 'player' );
        this.physics.add.collider(player, worldLayer);
    }

    function update (time, delta) {
        player.body.setVelocity(0);

// Horizontal movement
if (cursors.left.isDown) {
  player.body.setVelocityX(-100);
} else if (cursors.right.isDown) {
  player.body.setVelocityX(100);
}

// Vertical movement
if (cursors.up.isDown) {
  player.body.setVelocityY(-100);
} else if (cursors.down.isDown) {
  player.body.setVelocityY(100);
}

// Normalize and scale the velocity so that player can't move faster along a diagonal
player.body.velocity.normalize().scale(speed);
}


    
    </script>

</body>
</html>